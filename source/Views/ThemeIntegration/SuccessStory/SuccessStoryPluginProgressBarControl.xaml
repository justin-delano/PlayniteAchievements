<local:ThemeControlBase x:Class="PlayniteAchievements.Views.ThemeIntegration.SuccessStory.SuccessStoryPluginProgressBarControl"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                   xmlns:controls="clr-namespace:Playnite.SDK.Controls;assembly=Playnite.SDK"
                   xmlns:converters="clr-namespace:PlayniteAchievements.Views.Converters"
                   xmlns:local="clr-namespace:PlayniteAchievements.Views.ThemeIntegration.Base"
                   mc:Ignorable="d"
                   d:DesignHeight="40" d:DesignWidth="300">

    <local:ThemeControlBase.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <converters:HeightToFontSizeConverter x:Key="HeightToFontSizeConverter" />
    </local:ThemeControlBase.Resources>

    <Grid Name="PART_GridContener">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Count indicator: Unlocked/Total -->
        <Label Grid.Column="0" HorizontalAlignment="Center" Height="{Binding ElementName=PART_GridContener, Path=ActualHeight}"
               FontSize="{Binding RelativeSource={RelativeSource AncestorType=PluginUserControl}, Path=FontSize}"
               Margin="0,0,10,0"
               Visibility="{Binding RelativeSource={RelativeSource AncestorType=PluginUserControl}, Path=IntegrationShowProgressBarIndicator, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Label.Content>
                <MultiBinding StringFormat="{}{0}/{1}">
                    <Binding Path="UnlockedCount" FallbackValue="0" />
                    <Binding Path="AchievementCount" FallbackValue="0" />
                </MultiBinding>
            </Label.Content>
        </Label>

        <!-- Progress Bar -->
        <ProgressBar Grid.Column="1"
                     Minimum="0"
                     Maximum="{Binding AchievementCount, FallbackValue=100}"
                     Value="{Binding UnlockedCount, FallbackValue=30}"
                     Height="{Binding ElementName=PART_GridContener, Path=ActualHeight}" />

        <!-- Percent label overlay -->
        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center"
                    Visibility="{Binding RelativeSource={RelativeSource AncestorType=PluginUserControl}, Path=IntegrationShowProgressBarPercent, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Label HorizontalAlignment="Center"
                   Height="{Binding ElementName=PART_GridContener, Path=ActualHeight}"
                   FontSize="{Binding RelativeSource={RelativeSource AncestorType=PluginUserControl}, Path=FontSize}">
                <Label.Content>
                    <MultiBinding StringFormat="{}{0:F0}">
                        <Binding Path="ProgressPercentage" FallbackValue="30" />
                    </MultiBinding>
                </Label.Content>
            </Label>
            <Label HorizontalAlignment="Center" Content="%"
                   Height="{Binding ElementName=PART_GridContener, Path=ActualHeight}"
                   FontSize="{Binding RelativeSource={RelativeSource AncestorType=PluginUserControl}, Path=FontSize}" />
        </StackPanel>
    </Grid>
</local:ThemeControlBase>
