<!-- SettingsControl.xaml -->
<UserControl x:Class="PlayniteAchievements.Views.SettingsControl"
             x:Name="SettingsControlRoot"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:conv="clr-namespace:PlayniteAchievements.Views.Converters"
             mc:Ignorable="d"
             d:DesignHeight="600"
             d:DesignWidth="700">

    <UserControl.Resources>
        <ResourceDictionary>
            <!-- Disable Steam auth buttons while busy -->
            <Style x:Key="SteamAuthActionButtonStyle"
                   TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding SteamAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 Value="True">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!-- Disable GOG auth buttons while busy -->
            <Style x:Key="GogAuthActionButtonStyle"
                   TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding GogAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 Value="True">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!-- Disable Epic auth buttons while busy -->
            <Style x:Key="EpicAuthActionButtonStyle"
                   TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding EpicAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 Value="True">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!-- Disable PSN auth buttons while busy -->
            <Style x:Key="PsnAuthActionButtonStyle"
                   TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding PsnAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 Value="True">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!-- Disable Xbox auth buttons while busy -->
            <Style x:Key="XboxAuthActionButtonStyle"
                   TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding XboxAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 Value="True">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!-- Section header style -->
            <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
                <Setter Property="Margin" Value="0,0,0,14"/>
                <Setter Property="Opacity" Value="0.9"/>
            </Style>

            <!-- Accent text style -->
            <Style x:Key="AccentTextStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="{DynamicResource FontSize}"/>
                <Setter Property="FontWeight" Value="Medium"/>
                <Setter Property="Foreground" Value="#4CC9F0"/>
            </Style>

            <!-- Modern button style -->
            <Style x:Key="ModernActionButton" TargetType="Button"
                   BasedOn="{StaticResource {x:Type Button}}">
                <Setter Property="Padding" Value="18,8"/>
                <Setter Property="MinWidth" Value="120"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" Value="0.85"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Opacity" Value="0.7"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- Section container style with shadow -->
            <Style x:Key="SectionBorderStyle" TargetType="Border">
                <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="Padding" Value="18"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="1"/>
            </Style>

            <!-- Setting row style -->
            <Style x:Key="SettingRowStyle" TargetType="Grid">
                <Setter Property="Margin" Value="0,0,0,14"/>
            </Style>

            <!-- Muted text style -->
            <Style x:Key="MutedTextStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
                <Setter Property="Opacity" Value="0.6"/>
                <Setter Property="FontSize" Value="{DynamicResource FontSizeSmall}"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="24,20,24,24">
        <TabControl x:Name="SettingsTabControl" SelectionChanged="TabControl_SelectionChanged" BorderThickness="0">
            <!-- ================== TAB: GENERAL SETTINGS ================== -->
            <TabItem x:Name="GeneralTab" Header="{DynamicResource LOCPlayAch_Settings_TabGeneral}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Plugin Header -->
                        <StackPanel Margin="0,0,0,24">
                            <TextBlock Text="{DynamicResource LOCPlayAch_Title_PluginName}"
                                       Foreground="{DynamicResource TextBrush}"
                                       Style="{DynamicResource BaseTextBlockStyle}"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,6" />
                            <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Description}"
                                       Style="{DynamicResource MutedTextStyle}"
                                       Margin="0,0,0,8"/>
                            <!-- Decorative accent line -->
                            <Border Height="2"
                                    Width="60"
                                    HorizontalAlignment="Left"
                                    Background="#4CC9F0"
                                    CornerRadius="1"
                                    Margin="0,8,0,0"/>
                        </StackPanel>

                        <!-- ================== RARITY THRESHOLDS ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Section_RarityThresholds}"
                                           Style="{StaticResource SectionHeaderStyle}"
                                           Margin="0,0,0,12"/>

                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_RarityThresholds_Description}"
                                           Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"/>

                                <!-- Threshold settings grid -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Ultra Rare -->
                                    <Border Grid.Row="0" Grid.Column="0"
                                            Background="#22E91E63"
                                            CornerRadius="8"
                                            Padding="14"
                                            Margin="0,0,8,8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Grid.Column="0"
                                                   Source="{StaticResource BadgePlatinumHexagon}"
                                                   Width="28" Height="28"
                                                   Margin="0,0,10,0"
                                                   VerticalAlignment="Center"
                                                   Effect="{StaticResource BadgeShadow}"/>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{DynamicResource LOCPlayAch_Rarity_UltraRare}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#E91E63"
                                                           Margin="0,0,0,2"/>
                                                <TextBlock Text="{DynamicResource LOCPlayAch_RarityThreshold_LTE}"
                                                           Style="{StaticResource MutedTextStyle}"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBox Text="{Binding Persisted.UltraRareThreshold, UpdateSourceTrigger=PropertyChanged}"
                                                         Width="50"
                                                         TextAlignment="Right"
                                                         VerticalAlignment="Center"/>
                                                <TextBlock Text="%"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"
                                                           Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <!-- Rare -->
                                    <Border Grid.Row="0" Grid.Column="1"
                                            Background="#22FF9800"
                                            CornerRadius="8"
                                            Padding="14"
                                            Margin="8,0,0,8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Grid.Column="0"
                                                   Source="{StaticResource BadgeGoldPentagon}"
                                                   Width="28" Height="28"
                                                   Margin="0,0,10,0"
                                                   VerticalAlignment="Center"
                                                   Effect="{StaticResource BadgeShadow}"/>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{DynamicResource LOCPlayAch_Rarity_Rare}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#FF9800"
                                                           Margin="0,0,0,2"/>
                                                <TextBlock Text="{DynamicResource LOCPlayAch_RarityThreshold_LTE}"
                                                           Style="{StaticResource MutedTextStyle}"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBox Text="{Binding Persisted.RareThreshold, UpdateSourceTrigger=PropertyChanged}"
                                                         Width="50"
                                                         TextAlignment="Right"
                                                         VerticalAlignment="Center"/>
                                                <TextBlock Text="%"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"
                                                           Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <!-- Uncommon -->
                                    <Border Grid.Row="1" Grid.Column="0"
                                            Background="#2203A9F4"
                                            CornerRadius="8"
                                            Padding="14"
                                            Margin="0,0,8,8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Grid.Column="0"
                                                   Source="{StaticResource BadgeSilverSquare}"
                                                   Width="28" Height="28"
                                                   Margin="0,0,10,0"
                                                   VerticalAlignment="Center"
                                                   Effect="{StaticResource BadgeShadow}"/>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{DynamicResource LOCPlayAch_Rarity_Uncommon}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#03A9F4"
                                                           Margin="0,0,0,2"/>
                                                <TextBlock Text="{DynamicResource LOCPlayAch_RarityThreshold_LTE}"
                                                           Style="{StaticResource MutedTextStyle}"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBox Text="{Binding Persisted.UncommonThreshold, UpdateSourceTrigger=PropertyChanged}"
                                                         Width="50"
                                                         TextAlignment="Right"
                                                         VerticalAlignment="Center"/>
                                                <TextBlock Text="%"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           VerticalAlignment="Center"
                                                           Margin="4,0,0,0"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <!-- Common -->
                                    <Border Grid.Row="1" Grid.Column="1"
                                            Background="#228BC34A"
                                            CornerRadius="8"
                                            Padding="14"
                                            Margin="8,0,0,8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Grid.Column="0"
                                                   Source="{StaticResource BadgeBronzeTriangle}"
                                                   Width="28" Height="28"
                                                   Margin="0,0,10,0"
                                                   VerticalAlignment="Center"
                                                   Effect="{StaticResource BadgeShadow}"/>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{DynamicResource LOCPlayAch_Rarity_Common}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#8BC34A"
                                                           Margin="0,0,0,2"/>
                                                <TextBlock Text="{DynamicResource LOCPlayAch_RarityThreshold_GT}"
                                                           Style="{StaticResource MutedTextStyle}"/>
                                            </StackPanel>
                                            <TextBlock Grid.Column="2"
                                                       Text="â€”"
                                                       Foreground="{DynamicResource TextBrush}"
                                                       Opacity="0.4"
                                                       VerticalAlignment="Center"
                                                       />
                                        </Grid>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- ================== SYNC & UPDATES ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Section_SyncUpdates}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <!-- Periodic Updates -->
                                <Grid Style="{StaticResource SettingRowStyle}" Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_EnablePeriodicUpdates}"
                                                          IsChecked="{Binding Persisted.EnablePeriodicUpdates}"
                                                  VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_HoursBetweenUpdates}"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,8,0"/>
                                            <TextBox Text="{Binding Persisted.PeriodicUpdateHours, UpdateSourceTrigger=PropertyChanged}"
                                                 Width="50"
                                                     IsEnabled="{Binding Persisted.EnablePeriodicUpdates}"
                                                 TextAlignment="Right"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Recent Refresh -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_RecentRefresh_Title}"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   FontWeight="SemiBold"
                                                   Margin="0,0,0,2"/>
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_RecentRefresh_Description}"
                                                   Style="{StaticResource MutedTextStyle}"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_RecentRefresh_RecentGames}"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,8,0"/>
                                            <TextBox Text="{Binding Persisted.RecentRefreshGamesCount, UpdateSourceTrigger=PropertyChanged}"
                                                 Width="50"
                                                 TextAlignment="Right"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Include Unplayed Games -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                            <CheckBox Content="{DynamicResource LOCPlayAch_IncludeUnplayedGames}"
                                                          IsChecked="{Binding Persisted.IncludeUnplayedGames}"
                                                  VerticalAlignment="Center"/>
                                        <TextBlock Text="{DynamicResource LOCPlayAch_IncludeUnplayedGames_Help}"
                                                   Style="{StaticResource MutedTextStyle}"
                                                   Margin="20,4,0,0"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Provider Execution Mode -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <CheckBox Content="{DynamicResource LOCPlayAch_Settings_EnableParallelProviderRefresh}"
                                                  IsChecked="{Binding Persisted.EnableParallelProviderRefresh}"
                                                  VerticalAlignment="Center"/>
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_EnableParallelProviderRefresh_Help}"
                                                   Style="{StaticResource MutedTextStyle}"
                                                   Margin="20,4,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- ================== NOTIFICATIONS ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Section_Notifications}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <StackPanel>
                                        <CheckBox Content="{DynamicResource LOCPlayAch_Settings_EnableNotifications}"
                                                  IsChecked="{Binding Persisted.EnableNotifications}"
                                              Margin="0,0,0,10"/>
                                    <CheckBox Content="{DynamicResource LOCPlayAch_Settings_NotifyPeriodicUpdates}"
                                                  IsChecked="{Binding Persisted.NotifyPeriodicUpdates}"
                                              Margin="18,0,0,10"
                                                  IsEnabled="{Binding Persisted.EnableNotifications}"/>
                                    <CheckBox Content="{DynamicResource LOCPlayAch_Settings_NotifyOnRebuild}"
                                                  IsChecked="{Binding Persisted.NotifyOnRebuild}"
                                              Margin="18,0,0,0"
                                                  IsEnabled="{Binding Persisted.EnableNotifications}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- ================== APPEARANCE ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Appearance}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <!-- Hidden Achievement Visibility -->
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_HiddenAchievements}"
                                           FontWeight="SemiBold" Margin="0,0,0,8"/>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_HiddenAchievements_Description}"
                                           Style="{StaticResource MutedTextStyle}" Margin="0,0,0,12"/>
                                <CheckBox Content="{DynamicResource LOCPlayAch_Settings_RevealHiddenIcon}"
                                          IsChecked="{Binding Persisted.ShowHiddenIcon}" Margin="18,0,0,8"/>
                                <CheckBox Content="{DynamicResource LOCPlayAch_Settings_RevealHiddenTitle}"
                                          IsChecked="{Binding Persisted.ShowHiddenTitle}" Margin="18,0,0,8"/>
                                <CheckBox Content="{DynamicResource LOCPlayAch_Settings_RevealHiddenDescription}"
                                          IsChecked="{Binding Persisted.ShowHiddenDescription}" Margin="18,0,0,16"/>

                                <!-- Other Appearance Options -->
                                <CheckBox Content="{DynamicResource LOCPlayAch_UseCoverImages}"
                                          IsChecked="{Binding Persisted.UseCoverImages}"
                                          Margin="0,0,0,10"/>
                            </StackPanel>
                        </Border>

                        <!-- ================== LANGUAGE ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Language}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_GlobalLanguage}"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   FontWeight="SemiBold"
                                                   Margin="0,0,0,2"/>
                                        <TextBlock Style="{StaticResource MutedTextStyle}">
                                            Language for achievement text. Providers will use this language when available, falling back to English if not supported.
                                        </TextBlock>
                                    </StackPanel>

                                    <ComboBox Grid.Column="1"
                                               Width="200"
                                               SelectedValuePath="Tag"
                                               SelectedValue="{Binding Persisted.GlobalLanguage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_English}" Tag="english"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_German}" Tag="german"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_French}" Tag="french"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Spanish}" Tag="spanish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Italian}" Tag="italian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Portuguese}" Tag="portuguese"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_BrazilianPortuguese}" Tag="brazilian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Russian}" Tag="russian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Polish}" Tag="polish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Dutch}" Tag="dutch"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Swedish}" Tag="swedish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Finnish}" Tag="finnish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Danish}" Tag="danish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Norwegian}" Tag="norwegian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Hungarian}" Tag="hungarian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Czech}" Tag="czech"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Romanian}" Tag="romanian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Turkish}" Tag="turkish"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Greek}" Tag="greek"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Bulgarian}" Tag="bulgarian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Ukrainian}" Tag="ukrainian"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Thai}" Tag="thai"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Vietnamese}" Tag="vietnamese"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Japanese}" Tag="japanese"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Korean}" Tag="koreana"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_SimplifiedChinese}" Tag="schinese"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_TraditionalChinese}" Tag="tchinese"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_SteamLanguage_Arabic}" Tag="arabic"/>
                                    </ComboBox>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- ================== THEME INTEGRATION ================== -->
                        <!-- <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="Theme Integration"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16">
                                    PlayniteAchievements is the single source for both Desktop and Fullscreen themes.
                                    Both native and SuccessStory-compatible properties are always populated so themes can bind to either surface.
                                </TextBlock>

                                 <Separator Margin="0,16,0,16" />

                                <TextBlock Text="Native PlayniteAchievements theme integration"
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,8" />

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,0">
                                    Native controls and properties (prefixed differently) are always available to themes.
                                    Theme authors should use the native PlayniteAchievements prefix for new themes.
                                </TextBlock>
                            </StackPanel>
                        </Border> -->

                        <!-- ================== DATA MANAGEMENT ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Cache_Title}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_Cache_Description}"
                                               Style="{StaticResource MutedTextStyle}"
                                               VerticalAlignment="Center"/>

                                    <Button Grid.Row="0" Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_WipeCache_All}"
                                            Click="WipeCache_Click"
                                            Padding="14,6"
                                            Margin="16,0,0,0"
                                            MinWidth="90"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_ImageCache_Description}"
                                               Style="{StaticResource MutedTextStyle}"
                                               Margin="0,10,0,0"
                                               VerticalAlignment="Top"/>

                                    <Button Grid.Row="1" Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_ImageCache_Clear}"
                                            Click="ClearImageCache_Click"
                                            Padding="14,6"
                                            Margin="16,10,0,0"
                                            MinWidth="90"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_ResetFirstTimeSetup}"
                                               Style="{StaticResource MutedTextStyle}"
                                               Margin="0,10,0,0"
                                               VerticalAlignment="Top"/>

                                    <Button Grid.Row="2" Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_ResetFirstTimeSetupButton}"
                                            Click="ResetFirstTimeSetup_Click"
                                            Padding="14,6"
                                            Margin="16,10,0,0"
                                            MinWidth="90"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_ExportDatabase}"
                                               Style="{StaticResource MutedTextStyle}"
                                               Margin="0,10,0,0"
                                               VerticalAlignment="Top"/>

                                    <Button Grid.Row="3" Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_ExportDatabaseButton}"
                                            Click="ExportDatabase_Click"
                                            Padding="14,6"
                                            Margin="16,10,0,0"
                                            MinWidth="90"/>

                                    <TextBlock Grid.Row="4" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_OpenDataFolder}"
                                               Style="{StaticResource MutedTextStyle}"
                                               Margin="0,10,0,0"
                                               VerticalAlignment="Top"/>

                                    <Button Grid.Row="4" Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_OpenDataFolderButton}"
                                            Click="OpenDataFolder_Click"
                                            Padding="14,6"
                                            Margin="16,10,0,0"
                                            MinWidth="90"/>

                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: STEAM SETTINGS ================== -->
            <TabItem x:Name="SteamTab" Header="{DynamicResource LOCPlayAch_Provider_Steam}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.SteamEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.SteamEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- ================== STEAM CONNECTION ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.SteamEnabled}">
                            <StackPanel>
                                <!-- Steam Authentication (unified box for API key + web auth) -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_SteamAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <!-- Unified Auth Card (green if BOTH api key + web auth, red otherwise) -->
                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SteamFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <!-- Web Auth Section -->
                                            <StackPanel Margin="0,0,0,14">
                                                <!-- Status Row -->
                                                <Grid Margin="0,0,0,10">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>

                                                    <!-- Status Icon -->
                                                    <TextBlock Grid.Column="0"
                                                               FontFamily="Segoe MDL2 Assets"
                                                               FontSize="{DynamicResource FontSize}"
                                                               Margin="0,0,12,0"
                                                               VerticalAlignment="Center">
                                                        <TextBlock.RenderTransform>
                                                            <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                        </TextBlock.RenderTransform>
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding SteamFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                                 Value="True">
                                                                        <Setter Property="Text" Value="&#xE73E;"/>
                                                                        <Setter Property="Foreground" Value="#06FFA5"/>
                                                                        <Setter Property="FontWeight" Value="Bold"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding SteamFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                                 Value="False">
                                                                        <Setter Property="Text" Value="&#xE711;"/>
                                                                        <Setter Property="Foreground" Value="#F72585"/>
                                                                        <Setter Property="FontWeight" Value="Bold"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>

                                                    <!-- Status Text -->
                                                    <TextBlock Grid.Column="1"
                                                               Text="{Binding SteamAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               TextWrapping="Wrap"
                                                               VerticalAlignment="Center"
                                                               FontSize="{DynamicResource FontSize}"
                                                               FontWeight="SemiBold"/>
                                                </Grid>

                                                <!-- Buttons Row (left-aligned) -->
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="{DynamicResource LOCPlayAch_Settings_CheckSteamAuth}"
                                                            Style="{StaticResource SteamAuthActionButtonStyle}"
                                                            Click="SteamAuth_Check_Click"
                                                            Padding="14,6"
                                                            Margin="0,0,8,0"/>
                                                    <Button Content="{DynamicResource LOCPlayAch_Settings_ReauthSteam}"
                                                            Style="{StaticResource SteamAuthActionButtonStyle}"
                                                            Click="SteamAuth_Authenticate_Click"
                                                            Padding="14,6"
                                                            Margin="0,0,8,0"/>
                                                    <Button Content="{DynamicResource LOCPlayAch_Button_Clear}"
                                                            ToolTip="{DynamicResource LOCPlayAch_Tooltip_Clear}"
                                                            Style="{StaticResource SteamAuthActionButtonStyle}"
                                                            Click="SteamAuth_Clear_Click"
                                                            Padding="14,6"/>
                                                </StackPanel>

                                                <!-- Progress bar under buttons -->
                                                <ProgressBar Height="3"
                                                             Margin="0,8,0,0"
                                                             IsIndeterminate="True"
                                                             Foreground="#06FFA5">
                                                    <ProgressBar.Style>
                                                        <Style TargetType="ProgressBar">
                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding SteamAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Visibility" Value="Visible"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </ProgressBar.Style>
                                                </ProgressBar>
                                            </StackPanel>

                                            <!-- Separator -->
                                            <Border Height="1"
                                                    Background="{DynamicResource ControlBorderBrush}"
                                                    Opacity="0.5"
                                                    Margin="0,0,0,14"/>

                                            <!-- API Key Section -->
                                            <StackPanel>
                                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_SteamApiKey}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           Margin="0,0,0,6"/>

                                                <TextBox Text="{Binding Persisted.SteamApiKey, UpdateSourceTrigger=PropertyChanged}"
                                                         KeyDown="SteamApiKey_KeyDown"
                                                         LostFocus="SteamApiKey_LostFocus"
                                                         Margin="0,0,0,6"/>

                                                <TextBlock Style="{StaticResource MutedTextStyle}">
                                                    <Run Text="{DynamicResource LOCPlayAch_Settings_SteamApiKeyHint}" />
                                                    <Run Text=" " />
                                                    <Hyperlink NavigateUri="https://steamcommunity.com/dev/apikey"
                                                               RequestNavigate="Hyperlink_RequestNavigate">
                                                        <Run Text="steamcommunity.com/dev/apikey" />
                                                    </Hyperlink>
                                                </TextBlock>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </Grid>

                                <!-- Steam User ID (at bottom, read-only tint) -->
                                <Border Background="#10000000"
                                        CornerRadius="6"
                                        Padding="12"
                                        Margin="0,0,0,0">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="168"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0"
                                                   Text="{DynamicResource LOCPlayAch_Label_SteamUserId}"
                                                   Foreground="{DynamicResource TextBrush}"
                                                   VerticalAlignment="Center"
                                                   Opacity="0.7"/>

                                            <TextBox Grid.Row="0" Grid.Column="1"
                                                     Text="{Binding Persisted.SteamUserId, UpdateSourceTrigger=PropertyChanged}"
                                                 IsReadOnly="True"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="0"
                                                 Background="Transparent"
                                                 Foreground="{DynamicResource TextBrush}"
                                                 Opacity="0.6"/>

                                        <TextBlock Grid.Row="1" Grid.Column="1"
                                                   Margin="0,6,0,0"
                                                   Style="{StaticResource MutedTextStyle}"
                                                   Opacity="0.5">
                                            <Run Text="{DynamicResource LOCPlayAch_Label_SteamUserId_Help}" />
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: RETROACHIEVEMENTS SETTINGS ================== -->
            <TabItem x:Name="RetroAchievementsTab" Header="{DynamicResource LOCPlayAch_Provider_RetroAchievements}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.RetroAchievementsEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.RetroAchievementsEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.RetroAchievementsEnabled}">
                            <StackPanel>
                                <!-- RetroAchievements Authentication (unified box) -->
                                <Grid Margin="0,0,0,16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_RaAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"
                                               TextWrapping="Wrap"/>

                                    <!-- Unified Auth Card (green if BOTH username + API key, red otherwise) -->
                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding RaFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>

                                            <!-- Status Row -->
                                            <Grid Grid.Row="0" Margin="0,0,0,14">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Status Icon -->
                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding RaFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding RaFullyConfigured, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                </TextBlock>

                                                <!-- Status Text -->
                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding RaAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <!-- Separator -->
                                            <Border Grid.Row="0" Height="1"
                                                    Background="{DynamicResource ControlBorderBrush}"
                                                    Opacity="0.5"
                                                    Margin="36,0,0,14"/>

                                            <!-- Credentials Section -->
                                            <StackPanel Grid.Row="1">
                                                <!-- Username -->
                                                <StackPanel Margin="0,0,0,12">
                                                    <TextBlock Text="{DynamicResource LOCPlayAch_Label_Username}"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               FontSize="{DynamicResource FontSizeSmall}"
                                                               Opacity="0.8"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding Persisted.RaUsername, UpdateSourceTrigger=PropertyChanged}"
                                                             KeyDown="RaUsername_KeyDown"
                                                             LostFocus="RaUsername_LostFocus"
                                                             Margin="0,0,0,4"/>
                                                    <TextBlock Style="{StaticResource MutedTextStyle}">
                                                        <Run Text="{DynamicResource LOCPlayAch_Label_Username_Help}" />
                                                    </TextBlock>
                                                </StackPanel>

                                                <!-- API Key -->
                                                <StackPanel>
                                                    <TextBlock Text="{DynamicResource LOCPlayAch_Label_WebApiKey}"
                                                               Foreground="{DynamicResource TextBrush}"
                                                               FontSize="{DynamicResource FontSizeSmall}"
                                                               Opacity="0.8"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding Persisted.RaWebApiKey, UpdateSourceTrigger=PropertyChanged}"
                                                             KeyDown="RaApiKey_KeyDown"
                                                             LostFocus="RaApiKey_LostFocus"
                                                             Margin="0,0,0,4"/>
                                                    <TextBlock Style="{StaticResource MutedTextStyle}">
                                                        <Run Text="{DynamicResource LOCPlayAch_Label_WebApiKey_Help}" />
                                                        <Run Text=" " />
                                                        <Hyperlink NavigateUri="https://retroachievements.org/controlpanel.php"
                                                                   RequestNavigate="Hyperlink_RequestNavigate">
                                                            <Run Text="retroachievements.org/controlpanel.php" />
                                                        </Hyperlink>
                                                    </TextBlock>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Grid>

                                <!-- RetroAchievements Rarity Stats -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_RaRarityStats}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Center"/>

                                        <ComboBox Grid.Row="0" Grid.Column="1"
                                                  SelectedValue="{Binding Persisted.RaRarityStats}"
                                              SelectedValuePath="Tag"
                                              VerticalAlignment="Center"
                                              MinWidth="160"
                                              HorizontalAlignment="Left">
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_RaRarityStats_Casual}" Tag="casual"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_RaRarityStats_Hardcore}" Tag="hardcore"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_RaRarityStats_Combined}" Tag="combined"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="1"
                                               Text="{DynamicResource LOCPlayAch_Settings_RaRarityStats_Description}"
                                               Margin="0,6,0,0"
                                               Style="{StaticResource MutedTextStyle}"/>
                                </Grid>

                                <!-- RetroAchievements Points Display Mode -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_RaPointsMode}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Center"/>

                                    <ComboBox Grid.Row="0" Grid.Column="1"
                                              SelectedValue="{Binding Persisted.RaPointsMode}"
                                              SelectedValuePath="Tag"
                                              VerticalAlignment="Center"
                                              MinWidth="160"
                                              HorizontalAlignment="Left">
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_RaPointsMode_Points}" Tag="points"/>
                                        <ComboBoxItem Content="{DynamicResource LOCPlayAch_Settings_RaPointsMode_Scaled}" Tag="scaled"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="1"
                                               Text="{DynamicResource LOCPlayAch_Settings_RaPointsMode_Description}"
                                               Margin="0,6,0,0"
                                               Style="{StaticResource MutedTextStyle}"/>
                                </Grid>

                                 <!-- Refreshing options -->
                                 <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ScanningHashing}"
                                            Style="{StaticResource SectionHeaderStyle}"
                                            Margin="0,8,0,12"/>

                                <StackPanel>
                                        <CheckBox Content="{DynamicResource LOCPlayAch_Settings_EnableArchiveScanning}"
                                                  IsChecked="{Binding Persisted.EnableArchiveScanning}"
                                              Margin="0,0,0,10"/>
                                    <CheckBox Content="{DynamicResource LOCPlayAch_Settings_EnableDiscHashing}"
                                                  IsChecked="{Binding Persisted.EnableDiscHashing}"
                                              Margin="0,0,0,10"/>
                                </StackPanel>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_HashIndexMaxAgeDays}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Center"/>

                                        <TextBox Grid.Column="1"
                                                 Text="{Binding Persisted.HashIndexMaxAgeDays, UpdateSourceTrigger=PropertyChanged}"
                                             Width="60"
                                             TextAlignment="Right"
                                             VerticalAlignment="Center"/>
                                </Grid>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_ForceHashIndexRebuild}"
                                               Style="{StaticResource MutedTextStyle}"
                                               VerticalAlignment="Center"/>

                                    <Button Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_Settings_RebuildNow}"
                                            Click="ForceRebuildHashIndex_Click"
                                            Padding="14,6"
                                            Margin="16,0,0,0"
                                            MinWidth="90"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: GOG SETTINGS ================== -->
            <TabItem x:Name="GogTab" Header="{DynamicResource LOCPlayAch_Provider_GOG}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.GogEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.GogEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.GogEnabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_GogConnection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_Gog_OwnAuthHelp}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_GogAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                                VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding GogAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding GogAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding GogAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding GogAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <!-- Login/Logout buttons -->
                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Gog_Login}"
                                                        Style="{StaticResource GogAuthActionButtonStyle}"
                                                        Click="GogAuth_Login_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Gog_Clear}"
                                                        Style="{StaticResource GogAuthActionButtonStyle}"
                                                        Click="GogAuth_Clear_Click"
                                                        Padding="14,6"/>
                                            </StackPanel>

                                            <ProgressBar Height="3"
                                                         Margin="0,8,0,0"
                                                         IsIndeterminate="True"
                                                         Foreground="#06FFA5">
                                                <ProgressBar.Style>
                                                    <Style TargetType="ProgressBar">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding GogAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                         Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ProgressBar.Style>
                                            </ProgressBar>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: EPIC SETTINGS ================== -->
            <TabItem x:Name="EpicTab" Header="{DynamicResource LOCPlayAch_Provider_Epic}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.EpicEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.EpicEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.EpicEnabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_EpicConnection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_Epic_OwnAuthHelp}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_EpicAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding EpicAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding EpicAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding EpicAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding EpicAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <!-- Login/Logout buttons -->
                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Epic_Login}"
                                                        Style="{StaticResource EpicAuthActionButtonStyle}"
                                                        Click="EpicAuth_Login_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Epic_LoginAlternative}"
                                                        Style="{StaticResource EpicAuthActionButtonStyle}"
                                                        Click="EpicAuth_LoginAlternative_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Epic_Clear}"
                                                        Style="{StaticResource EpicAuthActionButtonStyle}"
                                                        Click="EpicAuth_Clear_Click"
                                                        Padding="14,6"/>
                                            </StackPanel>

                                            <ProgressBar Height="3"
                                                         Margin="0,8,0,0"
                                                         IsIndeterminate="True"
                                                         Foreground="#06FFA5">
                                                <ProgressBar.Style>
                                                    <Style TargetType="ProgressBar">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding EpicAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                         Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ProgressBar.Style>
                                            </ProgressBar>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: PLAYSTATION SETTINGS ================== -->
            <TabItem x:Name="PsnTab" Header="{DynamicResource LOCPlayAch_Provider_PlayStation}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.PsnEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.PsnEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.PsnEnabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_PsnConnection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <!-- NPSSO Instructions -->
                                <StackPanel Margin="0,0,0,16">
                                    <TextBlock TextWrapping="Wrap" Foreground="{DynamicResource TextBrush}" Margin="0,0,0,4">
                                        <Run Text="1. "/><Hyperlink NavigateUri="https://www.playstation.com" RequestNavigate="Hyperlink_RequestNavigate" TextDecorations="Underline" FontWeight="SemiBold"><TextBlock Foreground="#4CC9F0" Text="{DynamicResource LOCPlayAch_Settings_Psn_Step1}"/></Hyperlink><Run Text=" "/><Run Text="{DynamicResource LOCPlayAch_Settings_Psn_Step1Note}"/>
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Foreground="{DynamicResource TextBrush}" Margin="0,0,0,4">
                                        <Run Text="2. "/><Hyperlink NavigateUri="https://ca.account.sony.com/api/v1/ssocookie" RequestNavigate="Hyperlink_RequestNavigate" TextDecorations="Underline" FontWeight="SemiBold"><TextBlock Foreground="#4CC9F0" Text="{DynamicResource LOCPlayAch_Settings_Psn_Step2}"/></Hyperlink><Run Text=" "/><Run Text="{DynamicResource LOCPlayAch_Settings_Psn_Step2Note}"/>
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Foreground="{DynamicResource TextBrush}">
                                        <Run Text="3. "/><Run Text="{DynamicResource LOCPlayAch_Settings_Psn_Step3}"/>
                                    </TextBlock>
                                </StackPanel>

                                <!-- NPSSO Cookie Input -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_PsnNpsso}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <TextBox Grid.Column="1"
                                             Text="{Binding Persisted.PsnNpsso, UpdateSourceTrigger=PropertyChanged}"
                                             x:Name="PsnNpssoTextBox"
                                             Style="{StaticResource {x:Type TextBox}}"
                                             Padding="8,6"
                                             VerticalAlignment="Top"
                                             MaxHeight="60"
                                             TextWrapping="Wrap"
                                             AcceptsReturn="False"
                                             VerticalScrollBarVisibility="Auto"
                                             KeyDown="PsnNpsso_KeyDown"
                                             LostFocus="PsnNpsso_LostFocus"/>
                                </Grid>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_PsnNpssoHint}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_PsnAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding PsnAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding PsnAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding PsnAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding PsnAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Psn_Check}"
                                                        Style="{StaticResource PsnAuthActionButtonStyle}"
                                                        Click="PsnAuth_Check_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Psn_LoginLegacy}"
                                                        Style="{StaticResource PsnAuthActionButtonStyle}"
                                                        Click="PsnAuth_Login_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Psn_Clear}"
                                                        Style="{StaticResource PsnAuthActionButtonStyle}"
                                                        Click="PsnAuth_Clear_Click"
                                                        Padding="14,6"/>
                                            </StackPanel>

                                            <ProgressBar Height="3"
                                                         Margin="0,8,0,0"
                                                         IsIndeterminate="True"
                                                         Foreground="#06FFA5">
                                                <ProgressBar.Style>
                                                    <Style TargetType="ProgressBar">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding PsnAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                         Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ProgressBar.Style>
                                            </ProgressBar>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: XBOX SETTINGS ================== -->
            <TabItem x:Name="XboxTab" Header="{DynamicResource LOCPlayAch_Provider_Xbox}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.XboxEnabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.XboxEnabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.XboxEnabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_XboxConnection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_Xbox_Help}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Label_XboxAuth}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding XboxAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding XboxAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding XboxAuthenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding XboxAuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Xbox_Login}"
                                                        Style="{StaticResource XboxAuthActionButtonStyle}"
                                                        Click="XboxAuth_Login_Click"
                                                        Padding="14,6"
                                                        Margin="0,0,8,0"/>
                                                <Button Content="{DynamicResource LOCPlayAch_Settings_Xbox_Clear}"
                                                        Style="{StaticResource XboxAuthActionButtonStyle}"
                                                        Click="XboxAuth_Clear_Click"
                                                        Padding="14,6"/>
                                            </StackPanel>

                                            <ProgressBar Height="3"
                                                         Margin="0,8,0,0"
                                                         IsIndeterminate="True"
                                                         Foreground="#06FFA5">
                                                <ProgressBar.Style>
                                                    <Style TargetType="ProgressBar">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding XboxAuthBusy, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                         Value="True">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ProgressBar.Style>
                                            </ProgressBar>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: SHADPS4 ================== -->
            <TabItem x:Name="ShadPS4Tab" Header="{DynamicResource LOCPlayAch_Provider_ShadPS4}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.ShadPS4Enabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.ShadPS4Enabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.ShadPS4Enabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ShadPS4Connection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_ShadPS4_Description}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_ShadPS4ExecutablePath}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ShadPS4Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ShadPS4Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ShadPS4Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding ShadPS4AuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ShadPS4ExecutablePathHint}"
                                                       Style="{StaticResource MutedTextStyle}"
                                                       Margin="0,0,0,12"
                                                       TextWrapping="Wrap"/>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBox Grid.Column="0"
                                                         Text="{Binding Persisted.ShadPS4ExecutablePath, UpdateSourceTrigger=PropertyChanged}"
                                                         KeyDown="ShadPS4ExecutablePath_KeyDown"
                                                         LostFocus="ShadPS4ExecutablePath_LostFocus"
                                                         VerticalAlignment="Center"
                                                         Padding="8,6"
                                                         Margin="0,0,8,0"/>

                                                <Button Grid.Column="1"
                                                        Content="{DynamicResource LOCPlayAch_Settings_ShadPS4_Browse}"
                                                        Click="ShadPS4_Browse_Click"
                                                        Padding="14,6"/>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: RPCS3 ================== -->
            <TabItem x:Name="Rpcs3Tab" Header="{DynamicResource LOCPlayAch_Provider_RPCS3}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Provider Enable Toggle -->
                        <Border Style="{StaticResource SectionBorderStyle}" Margin="0,0,0,12">
                            <CheckBox Content="{DynamicResource LOCPlayAch_Settings_ProviderEnabled}"
                                      IsChecked="{Binding Persisted.Rpcs3Enabled}"
                                      FontWeight="SemiBold"
                                      FontSize="{DynamicResource FontSize}"/>
                        </Border>

                        <!-- Provider Disabled Message -->
                        <TextBlock Text="{DynamicResource LOCPlayAch_Settings_ProviderDisabledMessage}"
                                   Margin="0,0,0,16">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource MutedTextStyle}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Persisted.Rpcs3Enabled}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Border Style="{StaticResource SectionBorderStyle}" IsEnabled="{Binding Persisted.Rpcs3Enabled}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Rpcs3Connection}"
                                           Style="{StaticResource SectionHeaderStyle}"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16"
                                           Text="{DynamicResource LOCPlayAch_Settings_Rpcs3_Description}"/>

                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0"
                                               Text="{DynamicResource LOCPlayAch_Settings_Rpcs3ExecutablePath}"
                                               Foreground="{DynamicResource TextBrush}"
                                               VerticalAlignment="Top"
                                               Margin="0,8,0,0"/>

                                    <Border Grid.Column="1"
                                            Background="{DynamicResource PanelBackgroundBrush}"
                                            CornerRadius="8"
                                            Padding="16"
                                            BorderThickness="1">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#F72585"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Rpcs3Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                 Value="True">
                                                        <Setter Property="BorderBrush" Value="#06FFA5"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <StackPanel>
                                            <Grid Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="{DynamicResource FontSize}"
                                                           Margin="0,0,12,0"
                                                           VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Rpcs3Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="True">
                                                                    <Setter Property="Text" Value="&#xE73E;"/>
                                                                    <Setter Property="Foreground" Value="#06FFA5"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Rpcs3Authenticated, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                             Value="False">
                                                                    <Setter Property="Text" Value="&#xE711;"/>
                                                                    <Setter Property="Foreground" Value="#F72585"/>
                                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>

                                                <TextBlock Grid.Column="1"
                                                           Text="{Binding Rpcs3AuthStatus, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                           Foreground="{DynamicResource TextBrush}"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Center"
                                                           FontSize="{DynamicResource FontSize}"
                                                           FontWeight="SemiBold"/>
                                            </Grid>

                                            <TextBlock Text="{DynamicResource LOCPlayAch_Settings_Rpcs3ExecutablePathHint}"
                                                       Style="{StaticResource MutedTextStyle}"
                                                       Margin="0,0,0,12"
                                                       TextWrapping="Wrap"/>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBox Grid.Column="0"
                                                         Text="{Binding Persisted.Rpcs3ExecutablePath, UpdateSourceTrigger=PropertyChanged}"
                                                         KeyDown="Rpcs3ExecutablePath_KeyDown"
                                                         LostFocus="Rpcs3ExecutablePath_LostFocus"
                                                         VerticalAlignment="Center"
                                                         Padding="8,6"
                                                         Margin="0,0,8,0"/>

                                                <Button Grid.Column="1"
                                                        Content="{DynamicResource LOCPlayAch_Settings_Rpcs3_Browse}"
                                                        Click="Rpcs3_Browse_Click"
                                                        Padding="14,6"/>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ================== TAB: THEME MIGRATION ================== -->
            <TabItem x:Name="ThemeMigrationTab" Header="{DynamicResource LOCPlayAch_ThemeMigration_Title}">
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="20">

                        <!-- Plugin Header -->
                        <StackPanel Margin="0,0,0,24">
                            <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_Title}"
                                       Foreground="{DynamicResource TextBrush}"
                                       Style="{DynamicResource BaseTextBlockStyle}"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,6" />
                            <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_Description}"
                                       Style="{DynamicResource MutedTextStyle}"
                                       Margin="0,0,0,8"/>
                            <!-- Decorative accent line -->
                            <Border Height="2"
                                    Width="60"
                                    HorizontalAlignment="Left"
                                    Background="#4CC9F0"
                                    CornerRadius="1"
                                    Margin="0,8,0,0"/>
                        </StackPanel>

                        <!-- ================== MIGRATION SECTION ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_Migration}"
                                           Style="{StaticResource SectionHeaderStyle}"
                                           Margin="0,0,0,12"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16">
                                    <Run Text="{DynamicResource LOCPlayAch_ThemeMigration_Description}"/>
                                    <LineBreak/>
                                    <Run Text="{DynamicResource LOCPlayAch_ThemeMigration_BackupNote}"/>
                                </TextBlock>

                                <!-- Theme Dropdown and Migration Button -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <ComboBox Grid.Column="0"
                                              ItemsSource="{Binding AvailableThemes, ElementName=SettingsControlRoot}"
                                              DisplayMemberPath="BestDisplayName"
                                              SelectedValuePath="Path"
                                              SelectedValue="{Binding SelectedThemePath, ElementName=SettingsControlRoot}"
                                              VerticalContentAlignment="Center"
                                              IsEnabled="{Binding HasThemesToMigrate, ElementName=SettingsControlRoot}"/>

                                    <Button Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_ThemeMigration_Migration}"
                                            Click="MigrateTheme_Click"
                                            Padding="14,6"
                                            Margin="16,0,0,0"
                                            MinWidth="100"
                                            IsEnabled="{Binding HasThemesToMigrate, ElementName=SettingsControlRoot}"/>
                                </Grid>

                                <!-- No themes message -->
                                <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_NoThemesMessage}"
                                           Style="{StaticResource MutedTextStyle}"
                                           Margin="0,8,0,0"
                                           Visibility="{Binding ShowNoThemesMessage, ElementName=SettingsControlRoot, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                            </StackPanel>
                        </Border>

                        <!-- ================== REVERT SECTION ================== -->
                        <Border Style="{StaticResource SectionBorderStyle}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_Revert}"
                                           Style="{StaticResource SectionHeaderStyle}"
                                           Margin="0,0,0,12"/>

                                <TextBlock Style="{StaticResource MutedTextStyle}"
                                           Margin="0,0,0,16">
                                    <Run Text="{DynamicResource LOCPlayAch_ThemeMigration_RevertDescription}"/>
                                </TextBlock>

                                <!-- Revertable Theme Dropdown and Revert Button -->
                                <Grid Style="{StaticResource SettingRowStyle}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <ComboBox Grid.Column="0"
                                              ItemsSource="{Binding RevertableThemes, ElementName=SettingsControlRoot}"
                                              DisplayMemberPath="BestDisplayName"
                                              SelectedValuePath="Path"
                                              SelectedValue="{Binding SelectedRevertThemePath, ElementName=SettingsControlRoot}"
                                              VerticalContentAlignment="Center"
                                              IsEnabled="{Binding HasRevertableThemes, ElementName=SettingsControlRoot}"/>

                                    <Button Grid.Column="1"
                                            Content="{DynamicResource LOCPlayAch_ThemeMigration_RevertButton}"
                                            Click="RevertTheme_Click"
                                            Padding="14,6"
                                            Margin="16,0,0,0"
                                            MinWidth="100"
                                            IsEnabled="{Binding HasRevertableThemes, ElementName=SettingsControlRoot}"/>
                                </Grid>

                                <!-- No revertable themes message -->
                                <TextBlock Text="{DynamicResource LOCPlayAch_ThemeMigration_NoRevertableThemes}"
                                           Style="{StaticResource MutedTextStyle}"
                                           Margin="0,8,0,0"
                                           Visibility="{Binding ShowNoRevertableThemesMessage, ElementName=SettingsControlRoot, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
